== Virtual Box

Virtual Box es un software de virtualización gratuito que se puede descargar y utilizar en varios sistemas operativos:

* Windows.
* Mac OS X.
* Linux.

NOTE: En Linux se dispone de soporte nativo para virtualización, por lo tanto abordaremos la creación de máquinas virtuales en Linux con KVM y no con Virtual Box.

=== Instalación

Virtual Box se puede descargar desde su https://www.virtualbox.org/[página web]. Descargaremos la versión para nuestro sistema operativo y realizamos la instalación por defecto.

=== Creación de una máquina virtual

Para crear una máquina virtual deberemos disponer de una imagen ISO para la instalación.

Para ello descargaremos una ISO de https://www.centos.org/download/[CentOS Stream 8] para la arquitectura de nuestro procesador, http://isoredirect.centos.org/centos/8-stream/isos/x86_64/[x86_64]. Disponemos de varias imágenes: 

* Una boot iso de poco más de 800 MB.
* Una ISO de unos 10 GB.

Descargaremos la iso de 10 GB que contendrá toda la distribución.

Abrimos VirtualBox:

image::virtualbox/01-virtualbox.png[VirtualBox Install]

Para crear una máquina virtual pinchamos en el icono **Nueva**:app-name: 

image::virtualbox/02-virtualbox.png[VirtualBox Install]

Configuramos los siguientes parámetros:app-name: 

* Nombre de la máquina.
* Tipo de máquina que vamos a crear. Configuraremos la familia del Sistema Operativo, en este caso Linux.
* Versión del Sistema Operativo. Dado que no existe **CentOS** como versión configuraremos **Red Hat** ya que CentOS es de la familia de distribuciones basadas en Red Hat Enterprise Linux.
* Aunque no es necesario podemos cambiar la carpeta de la máquina virtual donde se creará la máquina virtual.

image::virtualbox/03-virtualbox.png[VirtualBox Install]

A continuación configuramos la memoria que le queremos asignar a la máquina virtual. Dependiendo de la memoria que tenga la máquina en la que hemos instalado VirtualBox podremos asignar mas o menos memoria a la máquina virtual:app-name:

image::virtualbox/04-virtualbox.png[VirtualBox Install]

Creamos un disco duro donde realizaremos la instalación:

image::virtualbox/05-virtualbox.png[VirtualBox Install]

Seleccionamos el formato del disco duro virtual. El disco duro virtual será un fichero en el que se escribirán los datos de la máquina virtual:

image::virtualbox/06-virtualbox.png[VirtualBox Install]

Lo configuraremos para que crezca dinámicamente. De esta forma, si creamos una máquina virtual con un disco de 16 GB en lugar de crear un fichero de 16 GB y ocupar todo el espacio se creará un fichero más pequeño que irá creciendo según haga falta hasta los 16 GB que es el tamaño máximo de la máquina virtual:

image::virtualbox/07-virtualbox.png[VirtualBox Install]

Configuramos el tamaño de disco duro virtual que utilizará la máquina virtual:

image::virtualbox/08-virtualbox.png[VirtualBox Install]

Ya tenemos la máquina virtual creada:

image::virtualbox/09-virtualbox.png[VirtualBox Install]

Esta máquina virtual está vacia, no tiene un sistema operativo instalado, por lo tanto tendremos que instalarla.

=== Configuración de red

VirtualBox puede utilizar diferentes configuraciones de red. Cada tipo de configuración permitirá un tipo de acceso a la red.

No explicaremos los tipos posibles de configuraciones posibles.

Configuraremos la red de tal forma que la máquina virtual tenga asignada una dirección ip en la misma red que la máquina anfitriona, es decir en tú red local.

Con esta configuración será posible conectarse por red a la máquina virtual y la máquina virtual podrá acceder a distintos recursos de red.

Si nos fijamos en la máquina virtual que hemos creado podremos ver que la configuración de red que tiene es NAT:

image::virtualbox/01-network.png[VirtualBox Network]

En configuración accedemos a la configuración de la máquina virtual:

image::virtualbox/02-network.png[VirtualBox Network]

Accedemos a la configuración de la máquina virtual:

image::virtualbox/03-network.png[VirtualBox Network]

Si vamos al apartado de red podremos configurar la red:

image::virtualbox/04-network.png[VirtualBox Network]

* Si hemos seguido las instrucciones la máquina virtual sólo tendrá una tarjeta de red.
* La conectamos a un **adaptador puente**.
* En nombre seleccionaremos el interface de red de la máquina donde hemos instalado VirtualBox que se encuentrá conectado a la red. De esta formá la máquina virtual utilizará el mismo adaptador para conectarse a la red.

Ahora ya tenemos configurada la red de la máquina virtual y podemos comprobarlo:

image::virtualbox/05-network.png[VirtualBox Network]

